{% extends 'hazard/base.html' %}

{% block content %}

<div>
    <h1>List of Hazards</h1>
    <h3>{{ user|title }} has {{ unresolved }} unresolved record{{ unresolved|pluralize:'s' }}</h3>
    <h3>{{ user|title }} has {{ resolved }} resolved record{{ resolved|pluralize:'s' }}</h3>
</div>

<div class="search-hazard-wrapper">
    <form action="" method="GET" class="search-hazard-form">
        <input type="text" name="search" value="{{ search_input }}">
        <input type="submit" value="Search">
    </form>
</div>



<div class="row">
    <div class="col-xs-12 btn-haz">
        <a href="{% url 'hazard-create' %}">Add Hazard</a>
    </div>
</div>
{% for hazard in hazards %}
<div class="row">
    <div class="col-xs-12 btn-haz title-haz">
        <a href="{% url 'hazard' hazard.id %}"> {{ hazard.title }}</a>
    </div>
</div>
<div class="row">
    {% if user.is_superuser %}
    {% if hazard.status.name == 'Resolved' %}
    <div class="col-xs-12 col-md-4 hazard-resolved-icon btn-haz"><i class="fa-solid fa-circle-check"></i>{{ hazard.status }}</div>
    {% else %}
    <div class="col-xs-12 col-md-4 hazard-unresolved-icon btn-haz"><i class="fa-solid fa-circle-minus"></i>{{ hazard.status }}</div>
    {% endif %}
    <div class="col-xs-12 col-md-4 btn-haz">
        {{ hazard.created_on|date:'Y-m-d' }}
    </div>
    <div class="col-xs-12 col-md-4 btn-haz">
        {{ hazard.user }}
    </div>
    {% else %}
    {% if hazard.status.name == 'Resolved' %}
    <div class="col-xs-12 col-md-6 hazard-resolved-icon btn-haz"><i class="fa-solid fa-circle-check"></i>{{
        hazard.status }}</div>
    {% else %}
    <div class="col-xs-12 col-md-6 hazard-unresolved-icon btn-haz"><i class="fa-solid fa-circle-minus"></i>{{
        hazard.status }}</div>
    {% endif %}
    <div class="col-xs-12 col-md-6 btn-haz">
        {{ hazard.created_on|date:'Y-m-d' }}
    </div>
    {% endif %}
</div>
<div class="btn-center">
    <div class="btn-action btn-update">
        <a class="edit-record" href="{% url 'hazard-update' hazard.id %}"><i class="fas fa-pen"></i> Update</a>
    </div>
    <div class="btn-action btn-delete">
        <a class="delete-record" href="{% url 'hazard-delete' hazard.id %}"><i class="fas fa-times"></i> Delete</a>
    </div>
</div>
<hr>
{% empty %}
<h3>No records found</h3>
{% endfor %}





{% endblock content %}